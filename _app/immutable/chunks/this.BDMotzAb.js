import{k as P,S as x,l as r,H as m,J as S,K as T,f as w,i as D,s as d,n as b,v as h,e as E,w as O,M as I,N as M,O as N,q as k}from"./index-client.DElzHtsw.js";import{U as u}from"./disclose-version.Bp1Y62Lx.js";function _(e,t=null,n){if(typeof e=="object"&&e!=null&&!P(e)&&!(x in e)){if(r in e){const s=e[r];if(s.t===e||s.p===e)return s.p}const f=I(e);if(f===m||f===S){const s=new Proxy(e,A);return T(e,r,{value:{s:new Map,v:w(0),a:D(e),p:s,t:e},writable:!0,enumerable:!1}),s}}return e}function g(e,t=1){d(e,e.v+t)}const A={defineProperty(e,t,n){if(n.value){const f=e[r],s=f.s.get(t);s!==void 0&&d(s,_(n.value,f))}return Reflect.defineProperty(e,t,n)},deleteProperty(e,t){const n=e[r],f=n.s.get(t),s=n.a,i=delete e[t];if(s&&i){const a=n.s.get("length"),l=e.length-1;a!==void 0&&a.v!==l&&d(a,l)}return f!==void 0&&d(f,u),i&&g(n.v),i},get(e,t,n){var i;if(t===r)return Reflect.get(e,r);const f=e[r];let s=f.s.get(t);if(s===void 0&&(!(t in e)||(i=b(e,t))!=null&&i.writable)&&(s=w(_(e[t],f)),f.s.set(t,s)),s!==void 0){const a=h(s);return a===u?void 0:a}return Reflect.get(e,t,n)},getOwnPropertyDescriptor(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);if(n&&"value"in n){const s=e[r].s.get(t);s&&(n.value=h(s))}return n},has(e,t){var i;if(t===r)return!0;const n=e[r],f=Reflect.has(e,t);let s=n.s.get(t);return(s!==void 0||E!==null&&(!f||(i=b(e,t))!=null&&i.writable))&&(s===void 0&&(s=w(f?_(e[t],n):u),n.s.set(t,s)),h(s)===u)?!1:f},set(e,t,n,f){const s=e[r];let i=s.s.get(t);i===void 0&&(O(()=>f[t]),i=s.s.get(t)),i!==void 0&&d(i,_(n,s));const a=s.a,l=!(t in e);if(a&&t==="length")for(let c=n;c<e.length;c+=1){const o=s.s.get(c+"");o!==void 0&&d(o,u)}var y=Reflect.getOwnPropertyDescriptor(e,t);if(y!=null&&y.set?y.set.call(f,n):e[t]=n,l){if(a){const c=s.s.get("length"),o=e.length;c!==void 0&&c.v!==o&&d(c,o)}g(s.v)}return!0},ownKeys(e){const t=e[r];return h(t.v),Reflect.ownKeys(e)}};function R(e,t){var f;var n=e&&((f=e[r])==null?void 0:f.t);return e===t||n===t}function j(e={},t,n,f){return M(()=>{var s,i;return N(()=>{s=i,i=[],O(()=>{e!==n(...i)&&(t(e,...i),s&&R(n(...s),e)&&t(null,...s))})}),()=>{k(()=>{i&&R(n(...i),e)&&t(null,...i)})}}),e}export{j as b,_ as p};
